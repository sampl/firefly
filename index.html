<!DOCTYPE html>

<html lang="en">

<head>
  <meta name="viewport" content="width=device-width">
  <title>Firefly | A Simple Javascript App Boilerplate</title>
  <link href="https://fonts.googleapis.com/css?family=Roboto+Mono:300,400,500,700" rel="stylesheet">
  <style>

    * {
      box-sizing: border-box;
    }
    body {
      font-family: system-ui, sans-serif;
      line-height: 1.4;
      margin: 0;
      color: #555666;
    }

    /* HERO */

    header {
      display: flex;
      flex-direction: column;
      align-items: stretch;
      justify-content: space-between;;
      min-height: 90vh;
      background: #333;
      background: linear-gradient(45deg, #FD7D68, #FDB952);
      margin: 15px;
      color: white;
      padding: 2rem;
    }

    @media (max-width:770px) {
      header {
        padding: 1rem;
        min-height: 20rem;
      }
    }

    /* hero nav */

    .top-bar {
      display: flex;
      justify-content: space-between;
      margin: 0 0 2rem;
    }
    .top-bar h1 {
      font-size: 1.1rem;
      margin: 0;
      color: white;
      font-weight: 500;
    }
    header nav {
      margin: 0;
      padding: 0;
    }
    header nav a {
      display: inline-block;
      color: white;
      margin-left: 1rem;
    }

    @media (max-width:770px) {
      header nav {
        display: none;
      }
    }

    /* hero content */

    .hero-content {
      margin: 2rem 0 0;
      text-align: center;
    }
    .headline {
      /*font-family: 'Roboto Mono', monospace;*/
      font-size: 2.2rem;
    }
    .sub-headline-big {
      font-size: 1.2rem;
      margin: 0 0 1rem;
    }
    .sub-headline {
      font-size: 1rem;
      margin: 0 0 2rem;
    }
    .hero-content a {
      color: white;
      text-decoration: underline;
    }
    .hero-content a.button {
      text-decoration: none;
      font-family: 'Roboto Mono', monospace;
      margin: 0rem auto;
      background: white;
      display: inline-block;
      color: #FD7D68;
      box-shadow: 0 2px 4px #FD7D68;
      padding: 1rem 1.5rem;
      border-radius: 4px;
      font-size: 1.2rem;
      font-weight: 500;
    }

    /* MAIN */

    main {
      display: flex;
      margin: 0 auto;
      padding: 2rem;
      max-width: 900px;
      position: relative;
    }

    aside {
      flex: 0 0 20%;
    }
    section {
      flex: 0 1 80%;
      padding-left: 3rem;
      margin-top: 1rem;
    }

    @media (max-width:770px) {
      main {
        flex-direction: column;
      }
      section {
        padding-left: 0;
      }
    }

    /* main sticky-nav */

    aside nav {
      margin: 0 0 2rem;
      position: absolute;
      position: -webkit-sticky;
      position: sticky;
      top: 2rem;
    }
    aside nav a {
      display: block;
      margin-bottom: .25rem;
    }
    aside nav a.primary {
      color: #FF5555;
      color: #8e5eed;
      color: #555666;
      margin-top: 1.75rem;
      font-weight: 500;
      font-size: 1.1rem;
      font-size: 1rem;
    }
    aside nav a.secondary {
      color: #777888;
      font-size: 0.9rem;
    }

    @media (max-width:770px) {
      aside nav a.primary {
        font-size: 1.2rem;
      }
      aside nav a.secondary {
        font-size: 1rem;
      }
    }

    /* main content */

    h1 {
      color: #FF5555;
      font-family: 'Roboto Mono', monospace;
      font-size: 1.6rem;
      font-weight: normal;
      margin: 5rem 0 1rem;
    }
    h2 {
      color: #555666;
      font-size: 1.4rem;
      font-weight: 600;
      margin: 2.5rem 0 .5rem;
    }
    h3 {
      color: #666777;
      font-size: 1rem;
      font-weight: 600;
      margin: 1.5rem 0 .5rem;
    }
    li {
      margin: 0 0 .5rem;
    }
    code {
      font-family: 'Roboto Mono', monospace;
      background: hsla(0, 0%, 0%, .05);
      font-size: 0.85em;
      padding: 1px 2px;
      border-radius: 2px;
    }
    pre {
      font-family: 'Roboto Mono', monospace;
      background: hsla(0, 0%, 0%, .05);
      font-size: 0.85em;
      padding: .5em;
      border-radius: 2px;
    }
    a {
      color: #8e5eed;
      text-decoration: none;
    }
    a:hover {
      text-decoration: underline;
    }
    .callout {
      padding: 0 1rem 1rem 1rem;
      margin: 0 0 1rem;
      background: hsl(45, 100%, 95%);
      border: 1px solid transparent;
      border-radius: 4px;
    }
    .callout h3 {
      color: #555666;
    }
    blockquote {
      color: #777888;
      border-left: 2px solid #dddeee;
      font-style: italic;
      margin: 1rem 0;
      padding-left: 1rem;
    }
    footer {
      margin: 8rem 0;
      text-align: center;
      color: #999aaa;
    }
    footer a {
      color: #999aaa;
      text-decoration: underline;
    }

  </style>
</head>

<body>

<header>
  <div class="top-bar">
    <h1>Firefly</h1>
    <nav>
      <a href="#philosophy">Philosophy</a>
      <a href="#how-it-works">How it works</a>
      <a href="#getting-started">Getting Started</a>
      <a href="#next">Next steps</a>
    </nav>
  </div>
  <div class="hero-content">
    <!-- <p class="headline">Making real websites is easier than you think</p> -->
    <p class="headline">You can build real web apps, too</p>
    <p class="sub-headline-big">Firefly is the simple, friendly boilerplate for new devs who just want to ship.</p>
    <p class="sub-headline">Building modern web apps with user login, forms, and search really is easier than you think. Let Firefly show you how.</p>
    <!-- <p class="sub-headline">If you've ever tried to learn Rails and given up, Firefly was made for you.</p> -->
    <a class="button" href="#start">Read the Guide</a>
    <p>
      or <a href="https://github.com/sampl/firefly">view source on Github</a></p>
    </p>
  </div>
  <div>
    <!-- empty div to get flex layout on <header> working -->
  </div>
</header>

<main>

<aside>
  <nav>
    <a class="primary" href="#philosophy">Philosophy</a>
    <a class="secondary" href="#philosophy-modern">Cautiously modern</a>
    <a class="secondary" href="#philosophy-simple">Radically simple</a>
    <a class="secondary" href="#philosophy-learners">Built for learners</a>

    <a class="primary" href="#how-it-works">How it works</a>
    <a class="secondary" href="#how-it-works-models">Models</a>
    <a class="secondary" href="#how-it-works-views">Views</a>
    <a class="secondary" href="#how-it-works-other">Other stuff</a>

    <a class="primary" href="#getting-started">Getting started</a>
    <a class="secondary" href="#getting-started-quick-start">Quick start</a>
    <a class="secondary" href="#getting-started-prerequisites">Before you begin</a>
    <a class="secondary" href="#getting-started-create">Creating your app</a>
    <a class="secondary" href="#getting-started-working">As you work</a>
    <a class="secondary" href="#getting-started-deploying">Deploying</a>

    <a class="primary" href="#next">Next steps</a>
  </nav>
</aside>

<section>

  <!-- rewrite to be about ME -->

  <p id="start"><strong>Making websites is <em>still too hard</em>.</strong></p>

  <p>Building a static site is pretty easy&mdash;but letting users log in, submit forms, and search is an order of magnitude harder. Many people who try just give up.</p>

  <p>Luckily, some new tools are making it easier. Together, they make a pretty compelling package.</p>

  <p>That's what Firefly is&mdash;a couple modern web tools put together to help you build real web apps. Think of it as a tiny alternative to Rails for building MVPs.</p>

  <p>I built Firefly for myself so that I bring my own ideas to life. I hope you use it to make something of your own.</p>

  <div class="callout">
    <h3>Warning</h3>
    <p>Firefly makes web development radically simple by not using backend servers, relational databases, unit tests, and other sane best-practices for enterprise codebases.</p>
  </div>


  <h1 id="philosophy">Philosophy</h1>


  <h2 id="philosophy-modern">Cautiously Modern</h2>

  <p>Firefly takes advantage of some modern web dev ideas to make the codebase extremely small.</p>

  <ul>
    <li><strong>Modern Javascript</strong> - Firely uses modern Javascript and the huge JS/NPM ecosystem, with one major caveat: we don't go bleeding-edge. All libraries and services we use are well-established, used in production by major companies and will be supported for years to come.</li>
    <li><strong>Single-page application</strong> - Firefly uses the front-end as much as possible. This lets us have a single codebase for most of our app logic.</li>
    <li><strong>Serverless backend</strong> - What Firefly can't do on the client or with a 3rd party service, it does using Firebase Functions, which require no uptime monitoring or special deployment.</li>
  </ul>


  <h2 id="philosophy-simple">Radically Simple</h2>

  <p>One way to make something easier to understand it to make it smaller. That's why Firefly goes to the extreme to reduce the amount of "stuff" you have to keep in your head to get things done.</p>

  <ul>
    <li><strong>Less code</strong> - Lots of app boilerplates are daunting, but Firefly has as little code as possible. The less code your app has, the less you have to understand and maintain.</li>
    <li><strong>Fewer features</strong> - Easy extendability means fewer features out-of-the-box. Firefly has login, form validation, and search&mdash;for everything else, we show you how to <a href="#next">add it on your own</a>.</li>
    <li><strong>Boilerplate</strong> - Firefly is just a boilerplate, not a library or framework. There are no scaffolds and no CLI (to add more models and views, just copy-and-paste).</li>
    <li><strong>Services</strong> - Instead of including code for authentication and search, Firefly outsources complicated stuff to APIs. This increases the chances of <a href="">vendor lock-in</a>, but vastly reduces the amount of complex code.</li>
  </ul>


  <h2 id="philosophy-learners">Built for learners</h2>

  <p>Firefly's goal is NOT to be a tool for experienced engineers&mdash;it's to empower people with non-engineering skills to develop working products as quickly as possible. That's why Firefly should not just be a great tool, but also a great teacher.</p>

  <ul>
    <li><strong>Code style</strong> - When possible, I've opted for code that's easy to read over code that's concise and clever. For example, you won't see any of <a href="https://stackoverflow.com/a/44527667/1061063">this stuff</a> in Firefly.</li>
    <li><strong>Code comments</strong> - <a href="">Code comments aren't always a good idea</a>&mdash;but when you're trying to understand a new codebase, they can make a huge difference. Firefly's source is heavily commented. Start reading at the <a href="https://github.com/sampl/firefly/blob/master/readme.md">readme</a>.</li>
    <li><strong>Creative constraints</strong> - Firebase makes some opinionated choices about what you need and what you don't&mdash; so you don't have to salt passwords, manage sessions, write password reset logic, monitor server uptime, build a REST api, or write SQL joins.</li>
    <li><strong>Extensible</strong> - Since Firefly is just a boilerplate, adding features is often as simple as copy-pasting from other parts of the app or <code>npm install</code>-ing a new package.</li>
  </ul>

  <!-- <p>Ruby on Rails opened up web development to a whole generation of developers&mdash;even people who didn't think they WERE  developers before they found Rails. Without it, we wouldn't have many of the amazing services we have today. Properly framed, I think the modern JavaScript ecosystem can do the same.</p> -->


  <h1 id="how-it-works">How it works</h1>

  <p>At its heart, Firefly is just a single-page front-end web app boilerplate.</p>

  <p>By default, it shows a list of Posts. Users can read individual posts and search for posts. Once they log in, users can create and edit their own posts. Check out the <a href="https://firefly-66e12.firebaseapp.com/">Firefly demo</a> to see it in action.</p>

  <p>The Firefly source has a lot more comments&mdash;as you read, try following along in the <a href="">code</a>.</p>


  <h2 id="how-it-works-models">Models</h2>

  <h3>The database</h3>

  <p>Firefly uses the NoSQL <a href="">Firebase Real-time Database</a> for persisting data. The Firebase database is basically a big JSON file in the cloud that you access directly from a users web browser (no server required). Before you go much further, you should read the <a href="https://firebase.google.com/docs/database/web/start">Firebase Real-time Database Guide</a>.</p>

  <p>Since Firebase is basically just JSON, it has no schema, no tables, and no collections. The convention in <em>Firefly</em>, however, is to use the top level of the database as a collection, the second level for unique keys for items in that collection, and the third level for the attributes of each item (like a row). It looks like this:</p>

  <pre>{
  "dogs": {
    "1": {
      "name": "spot",
      "age": "4",
    },
    "2": {
      "name": "fido",
      ...
    },
    "3": {...},
  },
  "cats": {...}
}</pre>

  <h3>Firefly models</h3>

  <p>It's easy to read and write to this data using Firebase, but you should avoid writing to the database directly.</p>

  <p>Firefly makes it easy to add, read, and remove items with Javascript objects called <a href="https://github.com/sampl/firefly/tree/master/src/models">models</a>. Models have clear separation from Firefly views (Kind of like MVC, without the "C").</p>

  <p>You can write a Firefly model however you like, but default Firefly models use a "base" model called <a href="https://github.com/sampl/firefly/blob/master/src/models/Supermodel.js">Supermodel</a>. When you <a href="https://github.com/sampl/firefly/blob/master/src/models/Post.js#L4">extend</a> Superclass to make a model, your new model will have a lot of useful functions for adding, querying, and deleting items built-in.</p>

  <p>Although Firebase can listen for changes to data, Firefly uses explict "get" functions to fetch data from models. This makes separating the models and views easier, and it's a simpler paradigm to learn and debug for beginners (pull requests welcome though!).</p>

  <p>Most models simply modify and return the Firebase promise on the Firebase query library. This makes error handling in the views very simple, but you'll wan tto learn a bit about <a href="https://www.youtube.com/watch?v=f8IgdnYIwOU">how promises work</a>.</p>


  <h3>The User model</h3>

  <p>The "User" model in Firefly is special. It has custom methods for signing in and out with Firebase auth.</p>

  <p>Firefly uses <a href="https://firebase.google.com/docs/auth/web/start">Firebase Authentication</a> for logging users in, etc.</p>


  <h3>Securing your data</h3>

  <p>Because clients can write data directly into your database, you need to write some security rules to keep bad guys from deleting data or viewing private data. <a href="https://firebase.google.com/docs/database/security">This video</a> does a great job explaining how these rules work.</p>


  <h3>Relational data</h3>

  <p>Handling data that "relates" to other data is one of the trickier parts of web development. Because Firebase is a NoSQL database, Firefly has to handle this differently from o</p>

  <p>In Firefly, each collection can be directly manipulated by the clients. Which clients can update which collection is restricted by the security rules the developer writes.</p>

  <p>Each collection also has some attributes that are automatically calculated on the backend for security reasons. They are only updated by Firebase server cloud functions, which have unlimited privledges. These are designated with an underscore at the beginning of their name.</p>

  <p>For example: when you "like" a post in Firefly, the Firebase client adds a new "like" to <code>post_likes</code> in the database. Then, a Firebase function who's is watching that table finds the post you liked and increments that post's <code>_like_count</code> attribute. Now we can query and sort posts by the number of likes they have&mdash;but users can't edit a post's like count directly.</p>

  <!-- <p>Loop to query lots of results&mdash;fairly fast because Firebase batches db requests</p> -->


  <h2 id="how-it-works-views">Views</h2>


  <h3>Component-based views</h3>

  <p>Views in Firefly are built with <a href="">React</a>, which keeps a component's controller logic, templates, and even its CSS all in a single file. If you're used to writing HTML, CSS, and JavaScript in different files, this will feel weird at first. Stick with it&mdash;writing your UI using all-on-one components will feel like a revelation soon. Start by reading the <a href="https://facebook.github.io/react/docs/hello-world.html">official React guide</a>.</p>


  <h3>Routing</h3>

  <p>The router is the part of the app that shows different pages based on the URL. We use the popular <a href="https://reacttraining.com/react-router/web/guides">React Router</a>.</p>


  <h3>Listening for updates</h3>

  <p>Many React apps use something like <a href="https://egghead.io/courses/getting-started-with-redux">Redux</a> to for state management (which sort of a fancy way of saying "keep my views up-to-date when my data changes"). Many developers agree that <a>Redux is overkill</a> for a lot of simple apps.</p>

  <p>Instead, Firefly uses the much-simpler <a href="https://github.com/primus/eventemitter3">eventemitter3</a> library to let models announce when they've changed, and let views listen for those changes so they know to re-render.</p>


  <h2 id="how-it-works-other">Other stuff</h2>

  <p>Firefly uses <a href="">Create React App</a> and <a href="">Firebase command-line tools</a> to take care of transpiling, bundling, running tests, and deployment. You don't have to write or manage any configuration for this to work, just run <code>npm start</code>.</p>


  <h3>Bundling</h3>

  <p>Modern Javascript requires transpiling code to ensure that your app works on all browsers. Under-the-hood, Create React App uses <a href="https://webpack.js.org/">Webpack</a> to bundle all your files into a single <code>app.js</code>. Webpack starts at <code>src/app.js</code>, finds all the files that it imports (and the ones they import, etc) and bundles it all up into a single new <code>app.js</code>. Create React App also includes <a href="https://eslint.org/">ESLint</a> to keep you from making small mistakes and the <a href="https://babeljs.io/">Babel</a> transpiler so you can write ES6 code that works on all browsers.</p>


  <h3>Hosting</h3>

  <p>We use Firebase hosting to host your app. Firebase hosting comes with HTTPS for free, and it's the same price as Google Cloud Platform object storage (very cheap). See <a href="#using-deploying">Getting Started: Deploying</a> for directions on deploying your app.</p>


  <h1 id="getting-started">Getting Started</h1>

  <div class="callout">
    <h3 id="getting-started-quick-start">Quick start</h2>

    <ol>
      <li><code>git clone https://github.com/sampl/firefly &amp;&amp; cd firefly &amp;&amp; npm install</code></li>
      <li><code>mv .firebaserc.example .firebaserc &amp;&amp; mv env.development.example env.development &amp;&amp; mv .env.production.example .env.production</code></li>
      <li>add your Firebase keys to <code>.firebaserc</code> and the <code>.env</code> files</li>
      <li><code>npm start</code></li>
    </ol>
  </div>

  <h2 id="getting-started-prerequisites">Before you begin</h2>

  <p>This tutorial uses Git for version control. If you're not already a Git user, <a href="https://www.codecademy.com/learn/learn-git">you can learn about it here</a>.</p>

  <p><a href="https://nodejs.org/en/download">Download and install node</a> if you haven't already.</p>

  <p>Run <code>npm install -g firebase-tools</code> to install the <a href="https://firebase.google.com/docs/cli/">Firebase CLI</a>. You only need to do this once per computer.</p>

  <h2 id="getting-started-create">Creating your app</h2>

  <h3>Get the code</h3>

  <p>Firefly is just a boilerplate. To start a new Firefly project, we simply make a copy of Firefly.</p>

  <ol>
    <li>In your terminal, <code>cd</code> to the folder where you want your project to live.</li>
    <li>Clone this repo with <code>git clone https://github.com/sampl/firefly</code>.</li>
    <li>Go into the folder you just created with <code>cd firefly</code>. You can also rename the <code>firefly</code> folder to whatever you want.</li>
    <li>Run <code>npm install</code> to install all the packages Firefly needs.</li>
  </ol>

  <p>You've got your own Firefly app! Now let's tell it how to find the database.</p>

  <h3>Create the database</h3>

  <ol>
    <li>Go to the <a href="console.firebase.google.com">Firebase console</a> and sign in with your Google account</li>
    <li>Create a new project and name it something like <code>MyProjectName (Stage)</code></li>
    <li>Click "Add Firebase to your web app"</li>
    <li>You'll see a block of code&mdash;leave this window open, you'll need it in a minute</li>
  </ol>

  <h3>Connect to the database</h3>

  <p>Now let's connect our database to our app. The connection parameters are security secrets, so first we'll rename our environment files to keep them from getting committed into git (the new filenames are listed in <code>.gitignore</code>).</p>

  <ol>
    <li>First, rename <code>.firebaserc.example</code> to <code>.firebaserc</code> and replace the blank space next to "dev" with the <code>projectId</code> from the Firebase website.</li>
    <li>Rename <code>.env.development.example</code> to <code>.env.development</code>. Replace the blank spaces in that file with the codes from the Firebase website too.</li>
  </ol>


  <h3>Set up authentication</h3>

  <p>Before you can add any posts, you'll have to allow sign-in with Google. Firebase makes this very easy.</p>

  <ol>
    <li>Back in the <a href="https://console.firebase.google.com/">Firebase console</a>, click on "Authentication" in the sidebar on the left</li>
    <li>Click "Set up sign-in method"</li>
    <li>Click "Google", toggle the "Enable" switch, and hit "Save"</li>
  </ol>


  <h3>Set up Firebase Functions</h3>

  <p><a href="https://firebase.google.com/docs/admin/setup#add_firebase_to_your_app">Create a Service Account</a> to run maintenance scripts with <code>node scripts/test.js</code></p>


  <h3>Set up search</h3>

  <p>Firefly comes with a search powered by <a href="https://www.algolia.com">Algolia</a>. To enable search, <a href="https://www.algolia.com">create an account</a>, <a href="https://firebase.google.com/docs/functions/config-env">configure your functions credentials</a>, and <a href="https://console.firebase.google.com">upgrade your Firebase plan</a> to a tier that has <a href="https://firebase.google.com/docs/functions">Firebase functions</a>. See <a href="https://github.com/sampl/firefly/blob/master/functions/index.js">index.js</a> for full instructions.</p>


  <h2 id="using-working">As you work</h2>

  <p>Start your app with <code>npm start</code>. You should see a basic web app in your browser! ðŸ˜Ž</p>

  <p>Try logging in, then make sure you can create, like, edit, and delete posts.</p>

  <p>Now go back to your text editor and try editing some files. When you save, the changes should automatically appear in the browser.</p>

  <p>After each change, commit your work using <a href="">git</a>.</p>

  <p>When you're ready to deploy your app to stage, run <code>npm run stage</code>.</p>


  <h2 id="using-deploying">Deploying</h2>

  <p>Each project you make using Firefly actually uses <em>two</em> Firebase projects&mdash;one for development and staging, and one for the live production site. We already made the development project, now we need to make one for production.</p>

  <ol>
    <li>Go back to <a href="#getting-started-firebase">Connecting to Firebase</a> and repeat the steps, but call this project something like <code>MyProjectName - LIVE</code></li>
    <li>Fill in the "production" value in <code>.firebaserc</code></li>
    <li>Rename <code>.env.production.example</code> to <code>.env.production</code> and add the new Firebase connection parameters there too.</p>
    <li><strong>Firefly is insecure by default. Before going live, <a href="https://firebase.google.com/docs/database/security">secure your app</a> by writing rules in <code>database.rules.json</code></strong></li>
  </ol>


  <p>When it's time to go live, run <code>npm run live</code>!</p>

  <p style="font-size: 2rem;">ðŸŽ‰ ðŸŽ‰ ðŸŽ‰</p>



  <h1 id="next">Next Steps</h1>

  <p>One of Firefly's principles is "<a href="#principles-simple">Radically Simple</a>", which means you'll probably have to add some important features yourself before you're done.</p>

  <ul>

    <li>Since Firefly is just a Javascript app, adding new features is usually as simple as running an <code>npm install foo</code> and adding <code>import Foo from 'foo'</code> in the code.</li>

    <li>The <a href="https://github.com/facebookincubator/create-react-app/blob/master/packages/react-scripts/template/README.md">Create React App user guide</a> has a ton of great guides for adding things like CSS Preprocessors, unit testing, and more.</li>

    <li>There are some great tools for keeping an eye on your app when it's live. We recommend <a href="https://docs.sentry.io/clients/javascript/">Sentry</a> for monitoring errors on the site, <a href="https://support.google.com/analytics/answer/1008080?hl=en">Google Analytics</a> for tracking traffic, and <a href="https://docs.intercom.com/install-on-your-product-or-site/quick-install/install-intercom-on-your-web-app-for-logged-in-users">Intercom</a> for in-app support.</li>

    <li>Did I miss something? Could something be more clear? <a href="https://github.com/sampl/firefly/issues">Submit issues and PRs</a></li>
  </ul>

  <footer>by <a href="http://sampl.us/">Sam Pierce Lolla</a></footer>

</section>

</main>

</body>

</html>
